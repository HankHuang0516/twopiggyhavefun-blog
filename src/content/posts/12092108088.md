---
title: '*DIY*數位生態系統(4)-藍芽監控盒'
date: '2015-08-21T15:55:31.000Z'
cover: 'https://pimg.1px.tw/lolwarden/1440172142-3603908460.jpg'
tags:
  - pixnet
  - unread
originalUrl: 'https://lolwarden.pixnet.net/blog/posts/12092108088'
businessHours: null
isPermanentlyClosed: false
category: DIY
---

<div class="pixnet-article prose max-w-none">
<p>遙控器給老闆Delay了三個禮拜才用好</p>
<p>今天終於拿到啦!</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6506023"><img title="IMG_7249.JPG" src="https://pimg.1px.tw/lolwarden/1440172142-3603908460.jpg" alt="IMG_7249.JPG" width="244" height="183" border="0"></a></p>
<p>...不過這個遙控器好大啊<img src="//s.pixfs.net/f.pixnet.net/images/emotions/008.gif" alt="" border="0"></p>
<p>就改稱叫"監控盒"吧~</p>
<p>(對了，盒子老闆算300$，我覺得很划算啦!)</p>
<p>&nbsp;這算第二次外包機盒，第一次外包是這篇:</p>
<h2 style="font-size: 16px; font-weight: normal; margin: 0px; padding: 0px; color: #777777; font-family: arial; letter-spacing: 1px;"><span style="text-decoration: underline; font-size: 10pt;"><span style="color: #3366ff;"><strong><a style="text-decoration: none; color: #020202;" href="http://lolwarden.pixnet.net/blog/post/202628140"><span style="color: #3366ff; text-decoration: underline;">*情人節DIY*製作情侶專屬音樂盒</span></a></strong></span></span></h2>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>簡單圖解介紹一下這個監控盒的特色與功能吧:</strong></span></p>
<p>1. 外觀:樸實簡約，一個LCD顯示螢幕、一個總開關、四個按鈕。</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6508309"><img title="遙控盒2.jpg" src="https://pimg.1px.tw/lolwarden/1440175456-1271593250.jpg" alt="遙控盒2.jpg" width="442" height="331" border="0"></a></p>
<p>&nbsp;</p>
<p>2. 內部:一個Mini pro Arduino 、一個藍芽模組 、 一個9V電池組、跳線大部分都是自壓杜邦，電路板用OK線較不占空間也不容易因擠壓斷線。</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6508297"><img title="遙控盒3.jpg" src="https://pimg.1px.tw/lolwarden/1440175452-2932835159.jpg" alt="遙控盒3.jpg" width="467" height="350" border="0"></a></p>
<p>&nbsp;</p>
<p>3. 顯示器功能: LCD第一排永遠都是系統運作的天數&amp;時數，第二排2秒切換一次，有"餵食"、"補水"、"馬達"、"感測"，四大主要項目做監視。</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6508306"><img title="遙控盒.jpg" src="https://pimg.1px.tw/lolwarden/1440175455-724088365.jpg" alt="遙控盒.jpg" width="469" height="352" border="0"></a></p>
<p>&nbsp;DEMO 影片 : 一開始是在等待與主機連線，所以數值都是0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&gt;&gt;我是主機&lt;&lt;</p>
<p>&nbsp;&nbsp;<iframe src="http://gfycat.com/ifr/YawningTanLamb" width="336" height="189" scrolling="no" frameborder="0" style="-webkit-backface-visibility: hidden; -webkit-transform: scale(1);"></iframe>&nbsp; &nbsp; &nbsp; &nbsp;<img title="IMG_7268.JPG" src="https://pimg.1px.tw/lolwarden/1440172081-1390806433.jpg" alt="IMG_7268.JPG" width="137" height="183" border="0"></p>
<p>&nbsp;</p>
<p>4. 設定功能: 這時候才會用到4個按鈕，按鈕功能由左到右分別是:&nbsp;設定模式/正常模式 、下一個 、&nbsp; 增加 &nbsp;、&nbsp;減少</p>
<p>&nbsp;<a href="http://lolwarden.pixnet.net/album/photo/6509920"><img title="遙控盒4.jpg" src="https://pimg.1px.tw/lolwarden/1440177618-1708272951.jpg" alt="遙控盒4.jpg" width="457" height="343" border="0"></a> &nbsp;</p>
<p>&nbsp;</p>
<p>監控盒外觀與功能差不多就介紹到這邊，監控盒放在任何地方都非常醒目呢。</p>
<p>&nbsp;</p>
<p><strong>再來是主機的部分</strong></p>
<p>*新增了WIFI(ESP8266) 資料雲端上傳ThingSpeak作資料整合</p>
<p>&nbsp;</p>
<p>這是前幾天ThingSpeak新增的功能"Apps"，裡面一個叫做"MATLAB Visualizations"</p>
<p><iframe src="http://api.thingspeak.com/apps/matlab_visualizations/20367" width="447" height="383" style="border: 1px solid #cccccc;"></iframe></p>
<p>藍色:水溫 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;橘色:水位</p>
<p>&nbsp;可以讓使用者更方便的整理數據，進行比較。</p>
<p>&nbsp;</p>
<p>不過Arduino程式設計的時候遇到之前沒遇到的問題</p>
<p>因為藍芽與WIFI都是串列通訊，如果不算內建Serial(Debug用)，就會用到兩個"SoftwareSerial"</p>
<p>當兩個SoftwareSerial進行 read/find 的時候就會打架，造成&nbsp;read/find&nbsp;誤動作，像是Arduino丟AT給ESP8266，但明明看到ESP8266亮藍燈，Arduino卻沒收到"OK"。</p>
<p>這時候就要用到"<span style="color: #ff9900;">listen()</span>"來做&nbsp;read/find 的分配</p>
<p>以下範例:&nbsp;</p>
<pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee; font-size: 12px; border: 1px dashed #999999; line-height: 14px; padding: 5px; overflow: auto; width: 100%;"><code>void setup()
{
 // Open serial communications and wait for port to open:
  <span style="color: #ff0000;">Serial.begin(9600);</span>
   while (!Serial) {
    ; // wait for serial port to connect. Needed for Leonardo only
  }
  // Start each software serial port
<span style="color: #ff0000;">  portOne.begin(9600);
  portTwo.begin(9600);</span>
}
void loop()
{
  // By default, the last intialized port is listening.
  // when you want to listen on a port, explicitly select it:
 <span style="color: #ff0000;"> portOne.listen();</span>
  Serial.println("Data from port one:");
  // while there is data coming in, read it
  // and send to the hardware serial port:
  while (portOne.available() &gt; 0) {
    char inByte = portOne.read();
    Serial.write(inByte);
  }
  // blank line to separate data from the two ports:
  Serial.println();
  // Now listen on the second port
  <span style="color: #ff0000;">portTwo.listen();</span>
  // while there is data coming in, read it
  // and send to the hardware serial port:
  Serial.println("Data from port two:");
  while (portTwo.available() &gt; 0) {
    char inByte = portTwo.read();
    Serial.write(inByte);
  }
  // blank line to separate data from the two ports:
  Serial.println();
}

 
</code></pre>
<p><span style="color: #000000;">但是</span>使用<span style="color: #ff9900;">listen()<span style="color: #000000;">也要注意，兩個&nbsp;SoftwareSerial listen 的間隔時間不能太相近，不然一樣會誤作。</span></span></p>
<p><span style="color: #ff9900;"><span style="color: #000000;">實際使用過，100ms 以上的間隔時間，就是安全範圍。</span></span></p>
<p>&nbsp;</p>
<p><strong style="color: #ff0000;">主題回到水草缸:</strong></p>
<p><span style="color: #000000;">這是5天前，剛設好缸的樣子，水有點混濁。</span></p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6153271"><img title="IMG_7203.JPG" src="https://pimg.1px.tw/lolwarden/1439815018-1062328173.jpg" alt="IMG_7203.JPG" width="359" height="269" border="0"></a></p>
<p>&nbsp;</p>
<p>這是現在的樣子，水質非常的清澈，水草明顯長高囉，這生長的速度太驚人了...(但後面還有更驚人的)</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6506083"><img title="IMG_7264.JPG" src="https://pimg.1px.tw/lolwarden/1440172162-122507414.jpg" alt="IMG_7264.JPG" width="358" height="269" border="0"></a></p>
<p>&nbsp;</p>
<p>5天前的豆芽，青澀內斂。</p>
<p><img title="IMG_7206.JPG" src="https://pimg.1px.tw/lolwarden/1439815022-4185246826.jpg" alt="IMG_7206.JPG" width="264" height="352" border="0"></p>
<p>現在的豆芽，豪氣奔放?</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6506089"><img title="IMG_7263.JPG" src="https://pimg.1px.tw/lolwarden/1440172159-2017176807.jpg" alt="IMG_7263.JPG" width="264" height="352" border="0"></a></p>
<p>&nbsp;</p>
<p>或許真的是黑土讓水中PH質偏酸了，酸性土壤對於植物是健康的，不過還沒買感測器或紙蕊測過PH。</p>
<p>&nbsp;</p>
<p>看完缸內外的植物後，來看看生物:</p>
<p>這顆是長著兔牙的角螺，奮力吃壁藻的模樣。<img src="//s.pixfs.net/f.pixnet.net/images/emotions/fox_12.gif" alt="" border="0"></p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6505957"><img title="IMG_7266.JPG" src="https://pimg.1px.tw/lolwarden/1440172078-1697729843.jpg" alt="IMG_7266.JPG" width="297" height="395" border="0"></a></p>
<p>&nbsp;</p>
<p>火山岩慢慢的吸收水份，終於下沉了，然後裡面有個亮點，找找看。</p>
<p>&nbsp;</p>
<p>&nbsp;<a href="http://lolwarden.pixnet.net/album/photo/6506095"><img title="IMG_7265.JPG" src="https://pimg.1px.tw/lolwarden/1440172164-1634581318.jpg" alt="IMG_7265.JPG" width="519" height="390" border="0"></a>&nbsp;&nbsp;</p>
<p>裡面有兩隻蝦米，來找碴，看你找不找的到!!</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6506101"><img title="IMG_7267.JPG" src="https://pimg.1px.tw/lolwarden/1440172171-55566041.jpg" alt="IMG_7267.JPG" width="524" height="393" border="0"></a></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">答案揭曉:</span></p>
<p>極火蝦窩在慕絲與火山岩之間。</p>
<p>火山岩提供礦物與穩定水質，慕絲給予食物與躲藏地，難怪蝦蝦常常群聚在裡面呢!</p>
<p>&nbsp;<a href="http://lolwarden.pixnet.net/album/photo/6508321"><img title="找蝦蝦.jpg" src="https://pimg.1px.tw/lolwarden/1440175454-214981952.jpg" alt="找蝦蝦.jpg" border="0"></a>&nbsp; &nbsp;</p>
<p>這個真的太難找了，照片模糊不說，用眼睛都很難看到呢!&nbsp;</p>
<p>蝦米的特色就是愛躲角落或貼牆壁，然後頭白、尾巴透明的就是牠了~</p>
<p><a href="http://lolwarden.pixnet.net/album/photo/6508342"><img title="找蝦米.jpg" src="https://pimg.1px.tw/lolwarden/1440175453-1978047164.jpg" alt="找蝦米.jpg" border="0"></a></p>
<p>&nbsp;</p>
<p>那下次目標就是進"水晶蝦"啦!</p>
<p>水中的貴族，不知道這個水草缸適不適合他們居住呢?</p>
<p>&nbsp;</p>
<p>DIY - 數位生態系統 第四章 &nbsp;就到這邊結束囉&nbsp;</p>
<p>期待這個水草造景缸越來越茂盛呢~</p>
<p>－－－－－－－－THE　END&nbsp;－－－－－－－－－</p>
<p>&nbsp;</p>
</div>

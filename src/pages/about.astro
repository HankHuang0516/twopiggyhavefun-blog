---
import Layout from '../layouts/Layout.astro';
import Sidebar from '../components/Sidebar.astro';
import { getEntry } from 'astro:content';

const aboutPost = await getEntry('posts', '12226426366');
if (!aboutPost) {
  throw new Error('About post (12226426366) not found');
}

const { Content } = await aboutPost.render();
---

<Layout title="關於兩隻小豬">
    <div class="container mx-auto px-4 py-8">
        <nav class="text-sm mb-6 text-gray-500">
            <a href="/twopiggyhavefun-blog/" class="hover:text-blue-600">首頁</a>
            <span class="mx-2">›</span>
            <span class="text-gray-700">關於兩隻小豬</span>
        </nav>

        <div class="flex flex-col lg:flex-row gap-8">
            <article class="flex-1 bg-white p-6 md:p-8 border border-gray-200">
                <header class="mb-8 border-b border-gray-100 pb-4">
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
                        {aboutPost.data.title}
                    </h1>
                </header>
                
                <div class="prose prose-lg max-w-none pixnet-content">
                    <Content />
                </div>
            </article>

            <Sidebar />
        </div>
    </div>
</Layout>

<style is:global>
    /* Styling for the specific About content format */
    .pixnet-content img {
        margin: 1.5em auto;
        max-width: 100%;
        height: auto;
    }
    .pixnet-content p {
        margin-bottom: 1.5em;
        line-height: 1.8;
    }
</style>
<script>
    // Fix content images client-side to handle base URL (reused logic)
    document.addEventListener('DOMContentLoaded', () => {
        const baseUrl = '/twopiggyhavefun-blog';
        const contentImages = document.querySelectorAll('.pixnet-content img');
        
        contentImages.forEach(img => {
            const src = img.getAttribute('src');
            if (src && src.startsWith('/') && !src.startsWith(baseUrl)) {
                img.src = `${baseUrl}${src}`;
            }
        });
    });
</script>
